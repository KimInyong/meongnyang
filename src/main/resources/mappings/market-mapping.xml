<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="MarketDAO">

	<!-- 전체 글수 가져오기 -->
	<select id="selectCountMarket" resultType="int">
		SELECT COUNT(*) FROM market
	</select>
	
	<!-- 게시글 조회수 증가 -->
	<update id="updateReadCount" parameterType="int">
		UPDATE market
		SET market_tb_read_count = market_tb_read_count + 1
		WHERE market_tb_no = #{marketTbNo}
	</update>

	<select id="selectMarket" parameterType="int" resultType="market">
		SELECT
		market_tb_no,
		customer_tb_no,
		market_tb_title,
		market_tb_content,
		market_tb_reg_date,
		market_tb_read_count,
		market_tb_sell_or_buy,
		market_tb_img_path
		FROM market
		WHERE market_tb_no = #{marketTbNo}
	</select>

	<select id="selectMarketList" resultType="market">
		SELECT 
		market_tb_no,
		customer_tb_no,
		market_tb_title,
		market_tb_content,
		market_tb_reg_date,
		market_tb_read_count,
		market_tb_sell_or_buy,
		market_tb_img_path 
		FROM market
	</select>

	<insert id="insertMarket" parameterType="market">
		INSERT INTO market
		(market_tb_no,
		customer_tb_no,
		market_tb_title,
		market_tb_content,
		market_tb_sell_or_buy,
		market_tb_img_path)
		VALUES 
		(market_seq.nextval,
		#{customerTbNo}, 
		#{marketTbTitle}, 
		#{marketTbContent},
		#{marketTbSellOrBuy},
		#{marketTbImgPath, jdbcType=VARCHAR})
	</insert>

	<update id="updateMarket" parameterType="market">
		UPDATE market
		SET
		market_tb_title,
		market_tb_content,
		market_tb_sell_or_buy,
		market_tb_img_path		
		WHERE
		market_tb_no = #{marketTbNo}
	</update>

	<delete id="deleteMarket" parameterType="int">
		DELETE FROM market WHERE
		market_tb_no = #{marketTbNo}
	</delete>

</mapper>
